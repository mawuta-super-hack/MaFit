 server {
  
   listen 80;
   server_name mafitness.sytes.net 51.250.27.243;
   server_tokens off;

   location / {
    #root /usr/share/nginx/html;
    #index  index.html;
    #try_files $uri /index.html;

    proxy_set_header        Host $host;
    proxy_set_header        X-Real-IP $remote_addr;
    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header        X-Forwarded-Proto $scheme;


    proxy_pass http://web:8000;
    # proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    # proxy_set_header        X-Real-IP $remote_addr;
    # proxy_set_header Host $host;
   }

    location /media/ {
       alias  /app/media/;
    }

    location /static/admin/ {
        alias  /app/static/admin/;
    }

    location /static/ {
        root /app/static/;
    }

#   # Запросы по адресам /api/... перенаправляй в контейнер backend
#   location /fitness/ {
#     # Полученный запрос отправь по протоколу http в контейнер backend
#     # на порт 8000 — именно его слушает Gunicorn
#     proxy_set_header Host $http_host;
#     proxy_pass http://web:8000/api/;
#   }

#   location /auth/ {
#     proxy_set_header Host $http_host;
#     proxy_pass http://web:8000/auth/;
#   }

#   # Так же поступай и с запросами к адресам /admin/...
#   location /admin/ {
#     proxy_set_header Host $http_host;
#     proxy_pass http://web:8000/admin/;
#   }

#   # По запросу к главной странице проекта должно открыться фронтенд-приложение.
#   # Все его файлы должны лежать в приложении со статикой 
#   location / {
#     # Всю статику будем искать в папке /staticfiles/.
#     # В ней будет доступна статика фронтенда и статика бэкенда.
#     # Инструкция alias указывает, где лежат
#     # статические файлы, которые должен раздавать Nginx
#     alias /staticfiles/;
#     # Если в запросе не указано, какой файл вернуть, 
#     # возвращай файл index.html — он есть в папке со статикой
#     index index.html;
#   }
# }



# server {
#     listen 80;
#     server_name 127.0.0.1;
#     server_tokens off;

#     location / {
#         root /usr/share/nginx/html;
#         index  index.html index.htm;
#         try_files $uri /index.html;
#         proxy_set_header        Host $host;
#         proxy_set_header        X-Real-IP $remote_addr;
#         proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
#         proxy_set_header        X-Forwarded-Proto $scheme;
#       }
#       error_page   500 502 503 504  /50x.html;

    
#     location /media/ {
#         root /var/html;
#     }

#     location /static/ {
#         root /var/html;
#     }


#     location /fitness/ {
#         proxy_set_header        Host $host;
#         proxy_set_header        X-Forwarded-Host $host;
#         proxy_set_header        X-Forwarded-Server $host;
#         proxy_pass http://web:8000;
#     }

#         location /admin/ {
#         proxy_pass http://web:8000/admin/;
#     }
#     location /auth/ {
#         proxy_pass http://web:8000/auth/;
#     }

# }


# server {

#     listen 80;
#     server_name 127.0.0.1;
#     server_tokens off;

#     #root /data;

#     # location /media/ {
#     #     root /app/media/;
#     # }
#     # location /static/ {
#     #     root /app/static/;
#     # }

#     location / {
#         root /usr/share/nginx/html;
#         index  index.html index.htm;
#         try_files $uri /index.html;
#         proxy_set_header        Host $host;
#         proxy_set_header        X-Real-IP $remote_addr;
#         proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
#         proxy_set_header        X-Forwarded-Proto $scheme;
#       }
#       error_page   500 502 503 504  /50x.html;
    
#     location /static/admin/ {
#         root /var/html/;
#     }
    
#     location /static/img/ {
#         root /var/html/};
    
#     location /media/ {
#         root /var/html/;
#     }

#     # location @web {
#     #     proxy_pass http://web:8000;
#     # }

#     # location / {
#     #      proxy_pass http://web:8000;
#     #}
    
#     location /admin/ {
#         proxy_pass http://web:8000/admin/;
#     }
    
#     location /auth/ {
#         proxy_pass http://web:8000/auth/;
#     }


}